<h2 class="font-bold text-2xl py-4">Applications</h2>
<%= render_card(title: nil, subtitle: nil, body: nil, footer: nil, class: "w-full" ) do %>
    <%= render_table do %>
        <%= table_head do %>
        <%= table_header "Name" do %>
            <div class="flex items-center">
                <%= sort_link(status: params[:status], column: "name", label: "Name") %>
                <%= sort_indicator(active: params[:column] == "name") %>
            </div>
        <% end %>
        <%= table_header "Email" do %>
            <div class="flex items-center">
                <%= sort_link(status: params[:status], column: "email", label: "Email") %>
                <%= sort_indicator(active: params[:column] == "email") %>
            </div>
        <% end %>
        <%= table_header "Applied On" do %>
            <div class="flex items-center">
                <%= sort_link(status: params[:status], column: "created_at", label: "Applied On") %>
                <%= sort_indicator(active: params[:column] == "created_at") %>
            </div>
        <% end %>
        <%= table_header "Status" do %>
            <div class="flex items-center">
                <%= sort_link(status: params[:status], column: "status", label: "Status") %>
                <%= sort_indicator(active: params[:column] == "status") %>
            </div>
        <% end %>
        <%= table_header "Action" %>
        <% end %>

        <%= table_body do %>
            <% @job_applications.each do |application| %>
                <%= table_row do %>
                <% end %>
            
                <%= table_column application[:name] %>
                <%= table_column application[:email] %>
                <%= table_column application[:created_at].strftime("%-d %b %Y") %>
                <%= table_column do %>
                    <%= render_badge text: application[:status].capitalize, variant: case application[:status]
                        when "Rejected" then :destructive
                        when "Accepted" then :default
                        else :outline
                        end
                    %>
                <% end %>
                <%= table_column do %>
          
                    <%= render_button "Show", as: :link, href: view_job_application_path(application), variant: :ghost do %>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
                        </svg> Show
                    <% end %>
                <% end %>
            <% end %>
        <% end %>
    
    <% end %>

    <% if @job_applications.empty? %>
       <div class="text-center text-gray-500 pt-5">No applications found</div>
    <% end %>

    <%= paginate @job_applications %>
<% end %>